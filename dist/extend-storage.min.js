!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.EStorage=t():e.EStorage=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";e.exports.getType=function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return"String";case"[object Number]":return"Number";case"[object Boolean]":return"Boolean";case"[object Function]":return"Function";case"[object Object]":return"Object";case"[object Array]":return"Array";case"[object Date]":return"Date"}},e.exports.getValue=function(e,t){switch(e){case"String":return t;case"Number":return Number(t);case"Boolean":let e;return e="true"===t;case"Function":return new Function("return "+t)();case"Object":case"Array":return JSON.parse(t);case"Date":return new Date(t)}}},function(e,t,r){"use strict";var n=r(2).default,s=new n("session"),i=new n("local");e.exports={session:s,local:i}},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(0);class s{constructor(e){this.VERSION="1.1.0",this.DATATYPE="String,Number,Boolean,Function,Date,Object,Array",this.type=e,this.data=null,this.events={},this.init()}init(){"session"===this.type?this.data=window.sessionStorage:"local"===this.type&&(this.data=window.localStorage);this.data.getItem("KEYWORDID")||this.setKeywordId({})}setKeywordId(e){this.data.setItem("KEYWORDID",JSON.stringify(e))}set(e,t,r){try{let s=this.getOldValue(e),i=Object(n.getType)(t),o="";"String"===i||"Number"===i||"Boolean"===i||"Function"===i||"Date"===i?o="".concat(t):"Object"!==i&&"Array"!==i||(o="".concat(JSON.stringify(t))),this.data.setItem(e,o),this.updateKeys(e,i,"set",r),this.events[e]&&this.call(e,t,s,"set")}catch(e){console.error("set extend storage error",e)}}get(e){let t=this.data.getItem(e);if("KEYWORDID"===e)return Object(n.getValue)("Object",t);let r=this.getKeys();if(this.isExist(e)&&t){const s=Date.now();return!r[e].expire||r[e].expire&&r[e].expire>s?Object(n.getValue)(r[e].type,t):(this.remove(e),null)}return null}getAll(){let e={};for(let t in this.data)this.data.hasOwnProperty(t)&&"KEYWORDID"!==t&&(e[t]=this.get(t));return e}clear(){this.data.clear(),this.setKeywordId({});for(let e in this.events)this.call(e,null,null,"clear")}update(e,t){this.isExist(key)&&this.set(key,e,t)}remove(e){if(!this.isExist(e)||""===e)return;this.updateKeys(e,"","remove");let t=this.getOldValue(e);this.data.removeItem(e),this.call(e,null,t,"remove")}keyType(e){let t=this.getKeys();if(this.isExist(e))return t[e]}getKeys(){let e=this.data.getItem("KEYWORDID");return Object(n.getValue)("Object",e)}isExist(e){if("KEYWORDID"===e)return!0;{let t=this.getKeys();return!(!e||!t[e])}}updateKeys(e,t,r,n){let s=this.get("KEYWORDID");switch(r){case"set":s[e]={type:t,expire:n?Date.now()+n:void 0};break;case"remove":delete s[e];break;case"clear":for(let e in s)"KEYWORDID"!==e&&delete s[e]}this.setKeywordId(s)}addEvent(e,t){e&&"function"==typeof t&&(this.events[e]=t)}call(e,t,r,n){var s=this.events;s[e]&&"function"==typeof s[e]&&(0,this.events[e])(t,r,n)}}s.prototype.getOldValue=function(e){let t=this.getKeys(),r=this.data.getItem(e);return Object(n.getValue)(t[e],r)}}])}));